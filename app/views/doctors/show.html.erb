<p id="notice"><%= notice %></p>

<div>
  <h3>Doctor:</h3>
<p>
  <strong>Name:</strong>
  <%= @doctor.name %>
</p>

<p>
  <strong>Surname:</strong>
  <%= @doctor.surname %>
</p>

<p>
  <strong>Description:</strong>
  <%= @doctor.description %>
</p>

<% if @doctor.patients.count > 0 %>
  </br>
  <h3>Your Patients:</h3>
  <% @doctor.patients.map do |p| %>
    <div>
      <p>
        <strong>Name:</strong>
        <%= "#{Patient.find(p.id).name} #{Patient.find(p.id).surname}" %>
      </p>

      <p>
        <strong>Patient age:</strong>
        <%= Patient.find(p.id).age %>
      </p>
    </div>
    <hr>
  <% end %>
<% else %>
  <p>
  	The list of your patients is empty.
  </p>
<% end %>

<% if @doctor.visits.count > 0 %>
  </br>
  <h3>Visits:</h3>
  <% @doctor.visits.map do |v| %>
    <div>
      <p>
        <strong>Visit description:</strong>
        <%= v.description %>
      </p>

      <p>
        <strong>Patient:</strong>
        <%= "#{Patient.find(v.patient_id).name} #{Patient.find(v.patient_id).surname}" %>
      </p>

      <p>
        <strong>Patient age:</strong>
        <%= Patient.find(v.patient_id).age %>
      </p>
    </div>
    <hr>
  <% end %>
<% else %>
  <p>
  	You don't have any scheduled visits.
  </p>
  <p>
  	<%= link_to 'Add a visit', new_visit_path %>
  </p>
<% end %>

<%= link_to 'Edit', edit_doctor_path(@doctor) %> |
<%= link_to 'Back', doctors_path %>
